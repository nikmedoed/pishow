{% macro render_collections(collections, selected, show_quick_start=False, quick_action=None) -%}
    <div class="collections-tree">
        {% for collection in collections %}
            <div class="collection-row" style="--depth: {{ collection.depth }}">
                <div class="collection-top">
                    <label class="collection-label">
                        <input type="checkbox" name="collections" value="{{ collection.id }}"
                               {% if collection.id in selected %}checked{% endif %}>
                        <span class="collection-name">{{ collection.display_name }}</span>
                        <span class="collection-inline-path">{{ collection.display_path }}</span>
                    </label>
                    <span class="collection-count">{{ collection.files_count }} items</span>
                    {% if show_quick_start and quick_action %}
                        <button type="submit" class="btn btn-ghost collection-quick collection-quick-desktop"
                                formaction="{{ quick_action }}"
                                formmethod="post"
                                name="collection"
                                value="{{ collection.id }}">
                            Quick start
                        </button>
                    {% endif %}
                </div>
                <div class="collection-bottom">
                    <span class="collection-path">{{ collection.display_path }}</span>
                    {% if show_quick_start and quick_action %}
                        <button type="submit" class="btn btn-ghost collection-quick collection-quick-mobile"
                                formaction="{{ quick_action }}"
                                formmethod="post"
                                name="collection"
                                value="{{ collection.id }}">
                            Quick start
                        </button>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{%- endmacro %}
